# Make sure we are receiving SIRI-VM data
#
# The process that writes the post_data.json moves an existing one
# out of the way before writing a new one so there's a short window
# in each update when post_data.json doesn't exist. Use 'for 2 cycles'
# to lower the chance of this triggering an alert.
#
# While in theory post_data.json will be updated several time a
# minute, there are occasional pauses overnight which aren't worth
# reporting. To address this we run one monitor with a long timeout
# and a second one with a shorter timeout that turned off by cron
# overnight.

check file cloudamber_data_monitor_json_slow with path /media/tfc/cloudamber/sirivm/data_monitor_json/post_data.json
    if does not exist for 2 cycles then alert
    if timestamp > 120 minutes then alert

check file cloudamber_data_monitor_json_fast with path /media/tfc/cloudamber/sirivm/data_monitor_json/post_data.json
    if does not exist for 2 cycles then alert
    if timestamp > 1 minutes then alert

